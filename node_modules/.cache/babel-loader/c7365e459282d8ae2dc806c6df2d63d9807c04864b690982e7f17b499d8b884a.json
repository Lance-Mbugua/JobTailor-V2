{"ast":null,"code":"import React,{useState,useEffect}from'react';import{db,auth}from'./firebase';import{doc,onSnapshot,setDoc,collection,getDocs,deleteDoc,updateDoc,getDoc,addDoc}from'firebase/firestore';import{signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut,sendEmailVerification,onAuthStateChanged}from'firebase/auth';import{loadStripe}from'@stripe/stripe-js';import{jsPDF}from'jspdf';import{createXai}from'@ai-sdk/xai';import Fingerprint2 from'fingerprintjs2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TOKEN_LIMIT=10000;const STRIPE_PUBLIC_KEY=process.env.REACT_APP_STRIPE_PUBLIC_KEY;const xai=createXai({apiKey:process.env.REACT_APP_XAI_API_KEY});function App(){const[user,setUser]=useState(null);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[jd,setJd]=useState('');const[masterResume,setMasterResume]=useState('');const[resume,setResume]=useState('');const[coverLetter,setCoverLetter]=useState('');const[applications,setApplications]=useState([]);const[userUsage,setUserUsage]=useState(null);const[isVerified,setIsVerified]=useState(false);const[deviceId,setDeviceId]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async currentUser=>{setUser(currentUser);setLoading(false);if(currentUser){setIsVerified(currentUser.emailVerified);await fetchApplications(currentUser.uid);await fetchUsage(currentUser.uid);if(currentUser.emailVerified&&!userUsage){await setDoc(doc(db,'users',currentUser.uid),{paidSubscription:false,email:currentUser.email.toLowerCase()},{merge:true});}}else{setApplications([]);setUserUsage(null);}});Fingerprint2.get(components=>{const values=components.map(c=>c.value);const fingerprint=Fingerprint2.x64hash128(values.join(''),31);setDeviceId(fingerprint);});return()=>unsubscribe();},[]);useEffect(()=>{if(!user)return;const urlParams=new URLSearchParams(window.location.search);const success=urlParams.get('success');if(success==='true'){user.getIdToken(true).then(async()=>{await fetchUsage(user.uid);await checkDeviceTrial();window.history.replaceState({},document.title,'/');}).catch(error=>console.error('Token refresh error:',error.message));}},[user]);const fetchApplications=async uid=>{try{const appsSnapshot=await getDocs(collection(db,`users/${uid}/applications`));const apps=appsSnapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setApplications(apps);}catch(error){console.error('Fetch applications error:',error.message);}};const fetchUsage=async uid=>{try{const usageDoc=await getDoc(doc(db,`users/${uid}/usage`,'tokens'));const userDoc=await getDoc(doc(db,'users',uid));const usageData=usageDoc.exists()?usageDoc.data():{totalTokens:0};const userData=userDoc.exists()?userDoc.data():{paidSubscription:false};setUserUsage({totalTokens:usageData.totalTokens,paidSubscription:userData.paidSubscription});}catch(error){console.error('Fetch usage error:',error.message);}};const checkDeviceTrial=async()=>{if(!deviceId||!user||!userUsage)return;try{const deviceDoc=await getDoc(doc(db,'devices',deviceId));if(deviceDoc.exists()){const deviceData=deviceDoc.data();const existingUid=deviceData.uid;const usageDoc=await getDoc(doc(db,`users/${existingUid}/usage`,'tokens'));const totalTokens=usageDoc.exists()?usageDoc.data().totalTokens:0;if(existingUid!==user.uid){if(!userUsage.paidSubscription&&totalTokens>=TOKEN_LIMIT){alert(`Trial limit of ${TOKEN_LIMIT} tokens already used on this device. Please subscribe.`);setUserUsage({totalTokens,paidSubscription:false});await signOut(auth);setUser(null);}else{if(!userUsage.paidSubscription){await setDoc(doc(db,`users/${user.uid}/usage`,'tokens'),{totalTokens},{merge:true});setUserUsage({totalTokens,paidSubscription:userUsage.paidSubscription});}await updateDoc(doc(db,'devices',deviceId),{uid:user.uid});}}else if(!userUsage.paidSubscription&&totalTokens>=TOKEN_LIMIT){alert(`Trial limit of ${TOKEN_LIMIT} tokens reached. Please subscribe.`);setUserUsage({totalTokens,paidSubscription:false});}}else{await setDoc(doc(db,'devices',deviceId),{trialUsed:true,uid:user.uid,timestamp:new Date().toISOString()});if(!(userUsage!==null&&userUsage!==void 0&&userUsage.paidSubscription)&&!(userUsage!==null&&userUsage!==void 0&&userUsage.totalTokens)){await setDoc(doc(db,`users/${user.uid}/usage`,'tokens'),{totalTokens:0},{merge:true});setUserUsage({totalTokens:0,paidSubscription:false});}}}catch(error){console.error('Check device trial error:',error.message);}};const login=async()=>{try{const userCredential=await signInWithEmailAndPassword(auth,email,password);setUser(userCredential.user);setEmail('');setPassword('');}catch(error){console.error('Login error:',error.message);alert(`Login failed: ${error.message}`);}};const signup=async()=>{try{const userCredential=await createUserWithEmailAndPassword(auth,email,password);await sendEmailVerification(userCredential.user);await setDoc(doc(db,'users',userCredential.user.uid),{email:email.toLowerCase(),paidSubscription:false},{merge:true});setUser(userCredential.user);setEmail('');setPassword('');alert('Verification email sent. Please check your inbox.');}catch(error){console.error('Signup error:',error.message);alert(`Signup failed: ${error.message}`);}};const resendVerification=async()=>{try{await sendEmailVerification(user);alert('Verification email resent. Please check your inbox.');}catch(error){console.error('Resend error:',error.message);alert(`Failed to resend verification email: ${error.message}`);}};const logout=async()=>{await signOut(auth);setUser(null);};const generateDocs=async()=>{if(!isVerified)return alert('Please verify your email first.');if(!jd)return alert('Please paste a job description.');if(!userUsage||!deviceId)return;if(!userUsage.paidSubscription&&userUsage.totalTokens>=TOKEN_LIMIT){alert(`Trial limit of ${TOKEN_LIMIT} tokens reached. Please subscribe.`);return;}const refinedJd=jd.replace(/<[^>]+>/g,'').replace(/\\s+/g,' ').replace(/(\\n|^)[^\\w\\n]+/g,'\\n').trim();const refinedResume=masterResume?masterResume.replace(/<[^>]+>/g,'').replace(/\\s+/g,' ').trim():'No master resume provided';const currentDate=new Date().toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});try{const response=await xai.chat.completions.create({model:'grok-2-latest',// Confirm with xAI docs\nmessages:[{role:'system',content:`You are an expert resume writer. Using the job description and master resume provided, create a professional resume and cover letter tailored to the job that will help the candidate stand out. Match their skills and experience to the job requirements clearly. Write in a natural, human tone�avoid AI-sounding phrases like \"versatile,\" \"dive in,\" or \"leverage.\" First, analyze the job description to identify the exact job title and hiring company name. Then, use markdown with four sections: \"## Job Title\" for the identified job title, \"## Company\" for the identified hiring company, \"## Resume\" for the resume, and \"## Cover Letter\" for the cover letter. For the cover letter, include the date as \"${currentDate}\" under the candidate�s contact info. If the job title or company is unclear, infer them logically from the description. Output only these sections, no extra text.`},{role:'user',content:`Job Description: ${refinedJd}\\nMaster Resume: ${refinedResume}`}],max_tokens:1500,temperature:0.5});const grokResponse=response.choices[0].message.content;const usage=response.usage;const jobTitleMatch=grokResponse.match(/## Job Title\\n([\\s\\S]*?)(?=## Company|$)/);const companyMatch=grokResponse.match(/## Company\\n([\\s\\S]*?)(?=## Resume|$)/);const resumeMatch=grokResponse.match(/## Resume\\n([\\s\\S]*?)(?=## Cover Letter|$)/);const coverLetterMatch=grokResponse.match(/## Cover Letter\\n([\\s\\S]*$)/);const jobTitle=jobTitleMatch?jobTitleMatch[1].trim():'Untitled Job';const company=companyMatch?companyMatch[1].trim():'Unknown';let generatedResume=resumeMatch?resumeMatch[1].trim():'Error: Resume not generated';let generatedCoverLetter=coverLetterMatch?coverLetterMatch[1].trim():'Error: Cover letter not generated';generatedResume=generatedResume.replace(/\\*\\*|\\[|\\]|\\(http.*?\\)/g,'').replace(/^\\s*-\\s*/gm,'').trim();generatedCoverLetter=generatedCoverLetter.replace(/\\*\\*|\\[|\\]|\\(http.*?\\)/g,'').replace(/^\\s*-\\s*/gm,'').trim();setResume(generatedResume);setCoverLetter(generatedCoverLetter);await saveApplication(generatedResume,generatedCoverLetter,jobTitle,company,usage);}catch(error){console.error('AI generation error:',error.message);alert(`Failed to generate documents: ${error.message}`);}};const saveApplication=async(generatedResume,generatedCoverLetter,jobTitle,company,usage)=>{const newTotal=(userUsage.totalTokens||0)+usage.total_tokens;await setDoc(doc(db,`users/${user.uid}/usage`,'tokens'),{totalTokens:newTotal},{merge:true});setUserUsage(prev=>({...prev,totalTokens:newTotal}));const appData={userId:user.uid,jd,resume:generatedResume,coverLetter:generatedCoverLetter,date:new Date().toISOString(),status:'Draft',company,title:jobTitle,tokenUsage:usage};const docRef=await addDoc(collection(db,`users/${user.uid}/applications`),appData);setApplications(prev=>[...prev,{id:docRef.id,...appData}]);setJd('');};const downloadPDF=(content,filename)=>{const doc=new jsPDF({orientation:'portrait',unit:'pt',format:'a4'});const margin=20;const pageWidth=doc.internal.pageSize.width-2*margin;const pageHeight=doc.internal.pageSize.height-2*margin;let fontSize=12;doc.setFont('helvetica');doc.setFontSize(fontSize);const lines=doc.splitTextToSize(content,pageWidth);const lineHeight=fontSize*1.15;const totalHeight=lines.length*lineHeight;if(totalHeight>pageHeight){fontSize=Math.floor(pageHeight/lines.length/1.15);doc.setFontSize(fontSize);}let y=margin;lines.forEach(line=>{doc.text(line,margin,y);y+=fontSize*1.15;});doc.save(filename);};const downloadResumePDF=()=>{var _applications;return downloadPDF(resume,`${((_applications=applications[applications.length-1])===null||_applications===void 0?void 0:_applications.title)||'Job'}_Resume.pdf`);};const downloadCoverLetterPDF=()=>{var _applications2;return downloadPDF(coverLetter,`${((_applications2=applications[applications.length-1])===null||_applications2===void 0?void 0:_applications2.title)||'Job'}_CoverLetter.pdf`);};const deleteApplication=async id=>{await deleteDoc(doc(db,`users/${user.uid}/applications`,id));setApplications(prev=>prev.filter(app=>app.id!==id));};const updateStatus=async(id,newStatus)=>{await updateDoc(doc(db,`users/${user.uid}/applications`,id),{status:newStatus});setApplications(prev=>prev.map(app=>app.id===id?{...app,status:newStatus}:app));};const handleSubscribe=async()=>{try{const stripe=await loadStripe(STRIPE_PUBLIC_KEY);const response=await fetch('/api/create-checkout-session',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:user.email})});const{success,data,error}=await response.json();if(!success)throw new Error(error);const result=await stripe.redirectToCheckout({sessionId:data.id});if(result.error)throw new Error(result.error.message);}catch(error){console.error('Subscribe error:',error.message);alert(`Subscription failed: ${error.message}`);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:\"Loading...\"});if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white p-8 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-indigo-600 mb-6\",children:\"JobTailor\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email\",className:\"w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Password\",type:\"password\",className:\"w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:login,className:\"w-full bg-indigo-500 text-white p-3 rounded-lg hover:bg-indigo-600 transition mb-2\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:signup,className:\"w-full bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition\",children:\"Sign Up\"})]})});}if(!isVerified){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white p-8 rounded-xl shadow-lg text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-indigo-600 mb-4\",children:\"Verify Your Email\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-4\",children:[\"A verification email has been sent to \",user.email,\". Please check your inbox.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:resendVerification,className:\"bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition mb-4\",children:\"Resend Email\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:\"Logout\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center max-w-5xl mx-auto mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-indigo-600\",children:\"JobTailor\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"Master Resume (Optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:masterResume,onChange:e=>setMasterResume(e.target.value),placeholder:\"Paste your master resume here...\",className:\"w-full p-3 h-24 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"New Application\"}),/*#__PURE__*/_jsx(\"textarea\",{value:jd,onChange:e=>setJd(e.target.value),placeholder:\"Paste job description here...\",className:\"w-full p-3 h-32 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:generateDocs,className:\"w-full bg-indigo-500 text-white p-3 rounded-lg hover:bg-indigo-600 transition\",children:\"Generate Docs\"})]}),(resume||coverLetter)&&/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"Generated Documents\"}),resume&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-800\",children:\"Resume\"}),/*#__PURE__*/_jsx(\"textarea\",{value:resume,onChange:e=>setResume(e.target.value),className:\"w-full p-3 h-32 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"})]}),coverLetter&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-800\",children:\"Cover Letter\"}),/*#__PURE__*/_jsx(\"textarea\",{value:coverLetter,onChange:e=>setCoverLetter(e.target.value),className:\"w-full p-3 h-32 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[resume&&/*#__PURE__*/_jsx(\"button\",{onClick:downloadResumePDF,className:\"w-full bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition\",children:\"Download Resume\"}),coverLetter&&/*#__PURE__*/_jsx(\"button\",{onClick:downloadCoverLetterPDF,className:\"w-full bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition\",children:\"Download Cover Letter\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"Applications & Tracker\"}),userUsage&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:userUsage.paidSubscription?'Subscribed (Unlimited Use)':`Tokens Used: ${userUsage.totalTokens}/${TOKEN_LIMIT} (Trial)`}),!userUsage.paidSubscription&&userUsage.totalTokens>=TOKEN_LIMIT&&/*#__PURE__*/_jsx(\"button\",{onClick:handleSubscribe,className:\"mt-2 bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition\",children:\"Subscribe Now\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-4\",children:applications.map(app=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center border-b pb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:app.title}),\" at \",app.company,\" (\",app.status,\")\",/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:new Date(app.date).toLocaleDateString()}),app.tokenUsage&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400\",children:[\"Tokens: \",app.tokenUsage.total_tokens]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{value:app.status,onChange:e=>updateStatus(app.id,e.target.value),className:\"p-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Draft\",children:\"Draft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Applied\",children:\"Applied\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Interview\",children:\"Interview\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Rejected\",children:\"Rejected\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Offer\",children:\"Offer\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteApplication(app.id),className:\"bg-red-500 text-white p-1 rounded-lg hover:bg-red-600 transition\",children:\"Delete\"})]})]},app.id))})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","db","auth","doc","onSnapshot","setDoc","collection","getDocs","deleteDoc","updateDoc","getDoc","addDoc","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","sendEmailVerification","onAuthStateChanged","loadStripe","jsPDF","createXai","Fingerprint2","jsx","_jsx","jsxs","_jsxs","TOKEN_LIMIT","STRIPE_PUBLIC_KEY","process","env","REACT_APP_STRIPE_PUBLIC_KEY","xai","apiKey","REACT_APP_XAI_API_KEY","App","user","setUser","email","setEmail","password","setPassword","jd","setJd","masterResume","setMasterResume","resume","setResume","coverLetter","setCoverLetter","applications","setApplications","userUsage","setUserUsage","isVerified","setIsVerified","deviceId","setDeviceId","loading","setLoading","unsubscribe","currentUser","emailVerified","fetchApplications","uid","fetchUsage","paidSubscription","toLowerCase","merge","get","components","values","map","c","value","fingerprint","x64hash128","join","urlParams","URLSearchParams","window","location","search","success","getIdToken","then","checkDeviceTrial","history","replaceState","document","title","catch","error","console","message","appsSnapshot","apps","docs","id","data","usageDoc","userDoc","usageData","exists","totalTokens","userData","deviceDoc","deviceData","existingUid","alert","trialUsed","timestamp","Date","toISOString","login","userCredential","signup","resendVerification","logout","generateDocs","refinedJd","replace","trim","refinedResume","currentDate","toLocaleDateString","day","month","year","response","chat","completions","create","model","messages","role","content","max_tokens","temperature","grokResponse","choices","usage","jobTitleMatch","match","companyMatch","resumeMatch","coverLetterMatch","jobTitle","company","generatedResume","generatedCoverLetter","saveApplication","newTotal","total_tokens","prev","appData","userId","date","status","tokenUsage","docRef","downloadPDF","filename","orientation","unit","format","margin","pageWidth","internal","pageSize","width","pageHeight","height","fontSize","setFont","setFontSize","lines","splitTextToSize","lineHeight","totalHeight","length","Math","floor","y","forEach","line","text","save","downloadResumePDF","_applications","downloadCoverLetterPDF","_applications2","deleteApplication","filter","app","updateStatus","newStatus","handleSubscribe","stripe","fetch","method","headers","body","JSON","stringify","json","Error","result","redirectToCheckout","sessionId","className","children","onChange","e","target","placeholder","type","onClick"],"sources":["C:/Users/owner/JobTailor V2/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db, auth } from './firebase';\r\nimport { doc, onSnapshot, setDoc, collection, getDocs, deleteDoc, updateDoc, getDoc, addDoc } from 'firebase/firestore';\r\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, sendEmailVerification, onAuthStateChanged } from 'firebase/auth';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { jsPDF } from 'jspdf';\r\nimport { createXai } from '@ai-sdk/xai';\r\nimport Fingerprint2 from 'fingerprintjs2';\r\n\r\nconst TOKEN_LIMIT = 10000;\r\nconst STRIPE_PUBLIC_KEY = process.env.REACT_APP_STRIPE_PUBLIC_KEY;\r\nconst xai = createXai({ apiKey: process.env.REACT_APP_XAI_API_KEY });\r\n\r\nfunction App() {\r\n    const [user, setUser] = useState(null);\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [jd, setJd] = useState('');\r\n    const [masterResume, setMasterResume] = useState('');\r\n    const [resume, setResume] = useState('');\r\n    const [coverLetter, setCoverLetter] = useState('');\r\n    const [applications, setApplications] = useState([]);\r\n    const [userUsage, setUserUsage] = useState(null);\r\n    const [isVerified, setIsVerified] = useState(false);\r\n    const [deviceId, setDeviceId] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n            setUser(currentUser);\r\n            setLoading(false);\r\n            if (currentUser) {\r\n                setIsVerified(currentUser.emailVerified);\r\n                await fetchApplications(currentUser.uid);\r\n                await fetchUsage(currentUser.uid);\r\n                if (currentUser.emailVerified && !userUsage) {\r\n                    await setDoc(doc(db, 'users', currentUser.uid), { paidSubscription: false, email: currentUser.email.toLowerCase() }, { merge: true });\r\n                }\r\n            } else {\r\n                setApplications([]);\r\n                setUserUsage(null);\r\n            }\r\n        });\r\n\r\n        Fingerprint2.get((components) => {\r\n            const values = components.map((c) => c.value);\r\n            const fingerprint = Fingerprint2.x64hash128(values.join(''), 31);\r\n            setDeviceId(fingerprint);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        const success = urlParams.get('success');\r\n        if (success === 'true') {\r\n            user.getIdToken(true).then(async () => {\r\n                await fetchUsage(user.uid);\r\n                await checkDeviceTrial();\r\n                window.history.replaceState({}, document.title, '/');\r\n            }).catch((error) => console.error('Token refresh error:', error.message));\r\n        }\r\n    }, [user]);\r\n\r\n    const fetchApplications = async (uid) => {\r\n        try {\r\n            const appsSnapshot = await getDocs(collection(db, `users/${uid}/applications`));\r\n            const apps = appsSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n            setApplications(apps);\r\n        } catch (error) {\r\n            console.error('Fetch applications error:', error.message);\r\n        }\r\n    };\r\n\r\n    const fetchUsage = async (uid) => {\r\n        try {\r\n            const usageDoc = await getDoc(doc(db, `users/${uid}/usage`, 'tokens'));\r\n            const userDoc = await getDoc(doc(db, 'users', uid));\r\n            const usageData = usageDoc.exists() ? usageDoc.data() : { totalTokens: 0 };\r\n            const userData = userDoc.exists() ? userDoc.data() : { paidSubscription: false };\r\n            setUserUsage({ totalTokens: usageData.totalTokens, paidSubscription: userData.paidSubscription });\r\n        } catch (error) {\r\n            console.error('Fetch usage error:', error.message);\r\n        }\r\n    };\r\n\r\n    const checkDeviceTrial = async () => {\r\n        if (!deviceId || !user || !userUsage) return;\r\n        try {\r\n            const deviceDoc = await getDoc(doc(db, 'devices', deviceId));\r\n            if (deviceDoc.exists()) {\r\n                const deviceData = deviceDoc.data();\r\n                const existingUid = deviceData.uid;\r\n                const usageDoc = await getDoc(doc(db, `users/${existingUid}/usage`, 'tokens'));\r\n                const totalTokens = usageDoc.exists() ? usageDoc.data().totalTokens : 0;\r\n\r\n                if (existingUid !== user.uid) {\r\n                    if (!userUsage.paidSubscription && totalTokens >= TOKEN_LIMIT) {\r\n                        alert(`Trial limit of ${TOKEN_LIMIT} tokens already used on this device. Please subscribe.`);\r\n                        setUserUsage({ totalTokens, paidSubscription: false });\r\n                        await signOut(auth);\r\n                        setUser(null);\r\n                    } else {\r\n                        if (!userUsage.paidSubscription) {\r\n                            await setDoc(doc(db, `users/${user.uid}/usage`, 'tokens'), { totalTokens }, { merge: true });\r\n                            setUserUsage({ totalTokens, paidSubscription: userUsage.paidSubscription });\r\n                        }\r\n                        await updateDoc(doc(db, 'devices', deviceId), { uid: user.uid });\r\n                    }\r\n                } else if (!userUsage.paidSubscription && totalTokens >= TOKEN_LIMIT) {\r\n                    alert(`Trial limit of ${TOKEN_LIMIT} tokens reached. Please subscribe.`);\r\n                    setUserUsage({ totalTokens, paidSubscription: false });\r\n                }\r\n            } else {\r\n                await setDoc(doc(db, 'devices', deviceId), { trialUsed: true, uid: user.uid, timestamp: new Date().toISOString() });\r\n                if (!userUsage?.paidSubscription && !userUsage?.totalTokens) {\r\n                    await setDoc(doc(db, `users/${user.uid}/usage`, 'tokens'), { totalTokens: 0 }, { merge: true });\r\n                    setUserUsage({ totalTokens: 0, paidSubscription: false });\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Check device trial error:', error.message);\r\n        }\r\n    };\r\n\r\n    const login = async () => {\r\n        try {\r\n            const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n            setUser(userCredential.user);\r\n            setEmail('');\r\n            setPassword('');\r\n        } catch (error) {\r\n            console.error('Login error:', error.message);\r\n            alert(`Login failed: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const signup = async () => {\r\n        try {\r\n            const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n            await sendEmailVerification(userCredential.user);\r\n            await setDoc(doc(db, 'users', userCredential.user.uid), {\r\n                email: email.toLowerCase(),\r\n                paidSubscription: false,\r\n            }, { merge: true });\r\n            setUser(userCredential.user);\r\n            setEmail('');\r\n            setPassword('');\r\n            alert('Verification email sent. Please check your inbox.');\r\n        } catch (error) {\r\n            console.error('Signup error:', error.message);\r\n            alert(`Signup failed: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const resendVerification = async () => {\r\n        try {\r\n            await sendEmailVerification(user);\r\n            alert('Verification email resent. Please check your inbox.');\r\n        } catch (error) {\r\n            console.error('Resend error:', error.message);\r\n            alert(`Failed to resend verification email: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        await signOut(auth);\r\n        setUser(null);\r\n    };\r\n\r\n    const generateDocs = async () => {\r\n        if (!isVerified) return alert('Please verify your email first.');\r\n        if (!jd) return alert('Please paste a job description.');\r\n        if (!userUsage || !deviceId) return;\r\n        if (!userUsage.paidSubscription && userUsage.totalTokens >= TOKEN_LIMIT) {\r\n            alert(`Trial limit of ${TOKEN_LIMIT} tokens reached. Please subscribe.`);\r\n            return;\r\n        }\r\n\r\n        const refinedJd = jd.replace(/<[^>]+>/g, '').replace(/\\s+/g, ' ').replace(/(\\n|^)[^\\w\\n]+/g, '\\n').trim();\r\n        const refinedResume = masterResume ? masterResume.replace(/<[^>]+>/g, '').replace(/\\s+/g, ' ').trim() : 'No master resume provided';\r\n        const currentDate = new Date().toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' });\r\n\r\n        try {\r\n            const response = await xai.chat.completions.create({\r\n                model: 'grok-2-latest', // Confirm with xAI docs\r\n                messages: [\r\n                    {\r\n                        role: 'system',\r\n                        content: `You are an expert resume writer. Using the job description and master resume provided, create a professional resume and cover letter tailored to the job that will help the candidate stand out. Match their skills and experience to the job requirements clearly. Write in a natural, human tone�avoid AI-sounding phrases like \"versatile,\" \"dive in,\" or \"leverage.\" First, analyze the job description to identify the exact job title and hiring company name. Then, use markdown with four sections: \"## Job Title\" for the identified job title, \"## Company\" for the identified hiring company, \"## Resume\" for the resume, and \"## Cover Letter\" for the cover letter. For the cover letter, include the date as \"${currentDate}\" under the candidate�s contact info. If the job title or company is unclear, infer them logically from the description. Output only these sections, no extra text.`,\r\n                    },\r\n                    { role: 'user', content: `Job Description: ${refinedJd}\\nMaster Resume: ${refinedResume}` },\r\n                ],\r\n                max_tokens: 1500,\r\n                temperature: 0.5,\r\n            });\r\n\r\n            const grokResponse = response.choices[0].message.content;\r\n            const usage = response.usage;\r\n\r\n            const jobTitleMatch = grokResponse.match(/## Job Title\\n([\\s\\S]*?)(?=## Company|$)/);\r\n            const companyMatch = grokResponse.match(/## Company\\n([\\s\\S]*?)(?=## Resume|$)/);\r\n            const resumeMatch = grokResponse.match(/## Resume\\n([\\s\\S]*?)(?=## Cover Letter|$)/);\r\n            const coverLetterMatch = grokResponse.match(/## Cover Letter\\n([\\s\\S]*$)/);\r\n\r\n            const jobTitle = jobTitleMatch ? jobTitleMatch[1].trim() : 'Untitled Job';\r\n            const company = companyMatch ? companyMatch[1].trim() : 'Unknown';\r\n            let generatedResume = resumeMatch ? resumeMatch[1].trim() : 'Error: Resume not generated';\r\n            let generatedCoverLetter = coverLetterMatch ? coverLetterMatch[1].trim() : 'Error: Cover letter not generated';\r\n\r\n            generatedResume = generatedResume.replace(/\\*\\*|\\[|\\]|\\(http.*?\\)/g, '').replace(/^\\s*-\\s*/gm, '').trim();\r\n            generatedCoverLetter = generatedCoverLetter.replace(/\\*\\*|\\[|\\]|\\(http.*?\\)/g, '').replace(/^\\s*-\\s*/gm, '').trim();\r\n\r\n            setResume(generatedResume);\r\n            setCoverLetter(generatedCoverLetter);\r\n            await saveApplication(generatedResume, generatedCoverLetter, jobTitle, company, usage);\r\n        } catch (error) {\r\n            console.error('AI generation error:', error.message);\r\n            alert(`Failed to generate documents: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const saveApplication = async (generatedResume, generatedCoverLetter, jobTitle, company, usage) => {\r\n        const newTotal = (userUsage.totalTokens || 0) + usage.total_tokens;\r\n        await setDoc(doc(db, `users/${user.uid}/usage`, 'tokens'), { totalTokens: newTotal }, { merge: true });\r\n        setUserUsage((prev) => ({ ...prev, totalTokens: newTotal }));\r\n\r\n        const appData = {\r\n            userId: user.uid,\r\n            jd,\r\n            resume: generatedResume,\r\n            coverLetter: generatedCoverLetter,\r\n            date: new Date().toISOString(),\r\n            status: 'Draft',\r\n            company,\r\n            title: jobTitle,\r\n            tokenUsage: usage,\r\n        };\r\n        const docRef = await addDoc(collection(db, `users/${user.uid}/applications`), appData);\r\n        setApplications((prev) => [...prev, { id: docRef.id, ...appData }]);\r\n        setJd('');\r\n    };\r\n\r\n    const downloadPDF = (content, filename) => {\r\n        const doc = new jsPDF({ orientation: 'portrait', unit: 'pt', format: 'a4' });\r\n        const margin = 20;\r\n        const pageWidth = doc.internal.pageSize.width - 2 * margin;\r\n        const pageHeight = doc.internal.pageSize.height - 2 * margin;\r\n        let fontSize = 12;\r\n        doc.setFont('helvetica');\r\n        doc.setFontSize(fontSize);\r\n\r\n        const lines = doc.splitTextToSize(content, pageWidth);\r\n        const lineHeight = fontSize * 1.15;\r\n        const totalHeight = lines.length * lineHeight;\r\n\r\n        if (totalHeight > pageHeight) {\r\n            fontSize = Math.floor((pageHeight / lines.length) / 1.15);\r\n            doc.setFontSize(fontSize);\r\n        }\r\n\r\n        let y = margin;\r\n        lines.forEach((line) => {\r\n            doc.text(line, margin, y);\r\n            y += fontSize * 1.15;\r\n        });\r\n\r\n        doc.save(filename);\r\n    };\r\n\r\n    const downloadResumePDF = () => downloadPDF(resume, `${applications[applications.length - 1]?.title || 'Job'}_Resume.pdf`);\r\n    const downloadCoverLetterPDF = () => downloadPDF(coverLetter, `${applications[applications.length - 1]?.title || 'Job'}_CoverLetter.pdf`);\r\n\r\n    const deleteApplication = async (id) => {\r\n        await deleteDoc(doc(db, `users/${user.uid}/applications`, id));\r\n        setApplications((prev) => prev.filter((app) => app.id !== id));\r\n    };\r\n\r\n    const updateStatus = async (id, newStatus) => {\r\n        await updateDoc(doc(db, `users/${user.uid}/applications`, id), { status: newStatus });\r\n        setApplications((prev) => prev.map((app) => (app.id === id ? { ...app, status: newStatus } : app)));\r\n    };\r\n\r\n    const handleSubscribe = async () => {\r\n        try {\r\n            const stripe = await loadStripe(STRIPE_PUBLIC_KEY);\r\n            const response = await fetch('/api/create-checkout-session', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ email: user.email }),\r\n            });\r\n            const { success, data, error } = await response.json();\r\n            if (!success) throw new Error(error);\r\n            const result = await stripe.redirectToCheckout({ sessionId: data.id });\r\n            if (result.error) throw new Error(result.error.message);\r\n        } catch (error) {\r\n            console.error('Subscribe error:', error.message);\r\n            alert(`Subscription failed: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"min-h-screen flex items-center justify-center\">Loading...</div>;\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-6\">\r\n                <div className=\"w-full max-w-md bg-white p-8 rounded-xl shadow-lg\">\r\n                    <h1 className=\"text-3xl font-bold text-indigo-600 mb-6\">JobTailor</h1>\r\n                    <input\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        placeholder=\"Email\"\r\n                        className=\"w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                    />\r\n                    <input\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        placeholder=\"Password\"\r\n                        type=\"password\"\r\n                        className=\"w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                    />\r\n                    <button onClick={login} className=\"w-full bg-indigo-500 text-white p-3 rounded-lg hover:bg-indigo-600 transition mb-2\">Login</button>\r\n                    <button onClick={signup} className=\"w-full bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition\">Sign Up</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isVerified) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-6\">\r\n                <div className=\"w-full max-w-md bg-white p-8 rounded-xl shadow-lg text-center\">\r\n                    <h1 className=\"text-2xl font-bold text-indigo-600 mb-4\">Verify Your Email</h1>\r\n                    <p className=\"text-gray-600 mb-4\">A verification email has been sent to {user.email}. Please check your inbox.</p>\r\n                    <button onClick={resendVerification} className=\"bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition mb-4\">Resend Email</button>\r\n                    <button onClick={logout} className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\">Logout</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6\">\r\n            <div className=\"flex justify-between items-center max-w-5xl mx-auto mb-6\">\r\n                <h1 className=\"text-3xl font-bold text-indigo-600\">JobTailor</h1>\r\n                <button onClick={logout} className=\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition\">Logout</button>\r\n            </div>\r\n\r\n            <div className=\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg mb-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">Master Resume (Optional)</h2>\r\n                <textarea\r\n                    value={masterResume}\r\n                    onChange={(e) => setMasterResume(e.target.value)}\r\n                    placeholder=\"Paste your master resume here...\"\r\n                    className=\"w-full p-3 h-24 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg mb-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">New Application</h2>\r\n                <textarea\r\n                    value={jd}\r\n                    onChange={(e) => setJd(e.target.value)}\r\n                    placeholder=\"Paste job description here...\"\r\n                    className=\"w-full p-3 h-32 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-4\"\r\n                />\r\n                <button onClick={generateDocs} className=\"w-full bg-indigo-500 text-white p-3 rounded-lg hover:bg-indigo-600 transition\">Generate Docs</button>\r\n            </div>\r\n\r\n            {(resume || coverLetter) && (\r\n                <div className=\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg mb-6\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">Generated Documents</h2>\r\n                    {resume && (\r\n                        <div className=\"mb-4\">\r\n                            <h3 className=\"font-medium text-gray-800\">Resume</h3>\r\n                            <textarea\r\n                                value={resume}\r\n                                onChange={(e) => setResume(e.target.value)}\r\n                                className=\"w-full p-3 h-32 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    {coverLetter && (\r\n                        <div className=\"mb-4\">\r\n                            <h3 className=\"font-medium text-gray-800\">Cover Letter</h3>\r\n                            <textarea\r\n                                value={coverLetter}\r\n                                onChange={(e) => setCoverLetter(e.target.value)}\r\n                                className=\"w-full p-3 h-32 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    <div className=\"flex space-x-4\">\r\n                        {resume && <button onClick={downloadResumePDF} className=\"w-full bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition\">Download Resume</button>}\r\n                        {coverLetter && <button onClick={downloadCoverLetterPDF} className=\"w-full bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition\">Download Cover Letter</button>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"max-w-5xl mx-auto bg-white p-6 rounded-xl shadow-lg\">\r\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">Applications & Tracker</h2>\r\n                {userUsage && (\r\n                    <div className=\"mb-4\">\r\n                        <p className=\"text-sm text-gray-600\">\r\n                            {userUsage.paidSubscription\r\n                                ? 'Subscribed (Unlimited Use)'\r\n                                : `Tokens Used: ${userUsage.totalTokens}/${TOKEN_LIMIT} (Trial)`}\r\n                        </p>\r\n                        {!userUsage.paidSubscription && userUsage.totalTokens >= TOKEN_LIMIT && (\r\n                            <button onClick={handleSubscribe} className=\"mt-2 bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition\">Subscribe Now</button>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                <ul className=\"space-y-4\">\r\n                    {applications.map((app) => (\r\n                        <li key={app.id} className=\"flex justify-between items-center border-b pb-2\">\r\n                            <div>\r\n                                <span className=\"font-medium\">{app.title}</span> at {app.company} ({app.status})\r\n                                <p className=\"text-sm text-gray-500\">{new Date(app.date).toLocaleDateString()}</p>\r\n                                {app.tokenUsage && <p className=\"text-xs text-gray-400\">Tokens: {app.tokenUsage.total_tokens}</p>}\r\n                            </div>\r\n                            <div className=\"flex space-x-2\">\r\n                                <select\r\n                                    value={app.status}\r\n                                    onChange={(e) => updateStatus(app.id, e.target.value)}\r\n                                    className=\"p-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                                >\r\n                                    <option value=\"Draft\">Draft</option>\r\n                                    <option value=\"Applied\">Applied</option>\r\n                                    <option value=\"Interview\">Interview</option>\r\n                                    <option value=\"Rejected\">Rejected</option>\r\n                                    <option value=\"Offer\">Offer</option>\r\n                                </select>\r\n                                <button\r\n                                    onClick={() => deleteApplication(app.id)}\r\n                                    className=\"bg-red-500 text-white p-1 rounded-lg hover:bg-red-600 transition\"\r\n                                >\r\n                                    Delete\r\n                                </button>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}